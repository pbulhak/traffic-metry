# ==============================================================================
# TrafficMetry Project - Environment Configuration (.env)
#
# This file is a template. Copy it to a file named .env and fill in your
# actual values. The .env file is ignored by Git and should never be
# committed to the repository.
# ==============================================================================

# === GLOBAL SETTINGS ===
DEBUG=false


# === CAMERA SETTINGS ===
# Settings for the IP camera stream configuration.

# RTSP camera URL - replace with your camera's URL
# Examples:
#   rtsp://192.168.1.123:554/stream1          (no authentication)
#   rtsp://admin:password@192.168.1.123:554/stream1  (with authentication)
CAMERA__URL="rtsp://192.168.1.123:554/stream1"

# Camera resolution and frame rate settings
CAMERA__WIDTH=1920
CAMERA__HEIGHT=1080
CAMERA__FPS=25


# === MODEL & TRACKER SETTINGS ===
# Configuration for the detection model (YOLO) and tracking algorithm (ByteTrack).

# Path to YOLO model file (.pt) or OpenVINO model folder
# OpenVINO format provides ~20-30% speedup with INT8 quantization
# Example .pt:       MODEL__PATH="data/models/yolov8n.pt"
# Example OpenVINO:  MODEL__PATH="data/models/yolo_openvino"
MODEL__PATH="data/models/yolov8n.pt"
MODEL__DEVICE="cpu" # Use 'cpu' or 'cuda:0' if you have a compatible NVIDIA GPU

# --- Confidence Thresholds ---
# Threshold for raw YOLO detections. Should be LOW to pass as many candidates
# as possible to the more intelligent ByteTrack algorithm.
MODEL__CONFIDENCE_THRESHOLD=0.1

# Threshold for ByteTrack to activate a new track. A detection must have
# higher confidence than this to initiate a new track.
MODEL__TRACK_ACTIVATION_THRESHOLD=0.3

# --- Tracker Parameters ---
# IoU (Intersection over Union) threshold for matching detections to existing tracks.
MODEL__MINIMUM_MATCHING_THRESHOLD=0.8

# Number of frames the tracker will "remember" a lost object before
# considering its journey complete.
MODEL__LOST_TRACK_BUFFER=30

# Number of consecutive frames an object must be tracked for its journey
# to be "confirmed" and officially started. Filters out noise.
MODEL__MINIMUM_CONSECUTIVE_FRAMES=5


# === CANDIDATE SAVER SETTINGS ===
# Settings for saving candidate images for future model training.

# Storage limit (in Gigabytes) for candidate images.
# When exceeded, the oldest files will be deleted automatically.
MODEL__CANDIDATE_STORAGE_LIMIT_GB=10.0


# === DATABASE SETTINGS ===
# Path to the SQLite database file.
DATABASE__PATH="data/trafficmetry.db"


# === SERVER SETTINGS ===
# Settings for the Uvicorn/FastAPI development server.
# Note: In production with Docker, these are managed by Docker and Nginx.

SERVER__HOST="0.0.0.0"
SERVER__PORT=8000
SERVER__WEBSOCKET_MAX_CONNECTIONS=10

# Minimum interval (in seconds) between VehicleUpdated events sent via WebSocket
SERVER__TRACKER_UPDATE_INTERVAL_SECONDS=1.0


# === LOGGING SETTINGS ===
# Configuration for the application's logger.

LOGGING__LEVEL="INFO" # e.g., DEBUG, INFO, WARNING, ERROR
LOGGING__FILE_PATH="data/logs/trafficmetry.log"
LOGGING__MAX_FILE_SIZE_MB=10 